<!DOCTYPE html>
<html>
<head>
    <title>–ú–∞–≥–∏—á–µ—Å–∫–∏–π –õ–µ—Å - –ò–≥—Ä–∞</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #2c3e50;
            color: white;
            margin: 0;
            padding: 20px;
        }
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #34495e;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
        }
        .status-bar {
            display: flex;
            justify-content: space-between;
            background-color: #2c3e50;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .action-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .action-btn {
            background-color: #3498db;
            color: white;
            padding: 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s;
        }
        .action-btn:hover {
            background-color: #2980b9;
        }
        .inventory {
            margin-top: 20px;
            padding: 10px;
            background-color: #2c3e50;
            border-radius: 5px;
        }
        .message-box {
            margin-top: 20px;
            padding: 10px;
            background-color: #2c3e50;
            border-radius: 5px;
            min-height: 100px;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="status-bar">
            <div>‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ: {{ player.health }}</div>
            <div>‚ú® –ú–∞–Ω–∞: {{ player.mana }}</div>
            <div>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å: {{ player.inventory|join(', ') if player.inventory else '–ø—É—Å—Ç–æ' }}</div>
        </div>

        <div class="action-buttons">   
            <form action="/lake/{{ player.player_id }}" method="get">
                <input type="hidden" name="action" value="lake">
                <button type="submit" class="action-btn">üèûÔ∏è –û—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è –∫ –æ–∑–µ—Ä—É</button>
            </form>

            <form action="/riddle/{{ player.player_id }}" method="get">
                <input type="hidden" name="action" value="riddle">
                <button type="submit" class="action-btn">ü§î –†–∞–∑–≥–∞–¥–∞—Ç—å –∑–∞–≥–∞–¥–∫—É (5-10 –º–∞–Ω—ã)</button>
            </form>

            <form action="/inventory/{{ player.player_id }}" method="get">
                <input type="hidden" name="action" value="inventory">
                <button type="submit" class="action-btn">üéí –û—Ç–∫—Ä—ã—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å</button>
            </form>
        </div>

        <div class="message-box" id="messageBox">
            <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏–≥—Ä—ã -->
        </div>

        <div class="inventory" id="inventoryBox" style="display: none;">
            <h3>üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å:</h3>
            <div id="inventoryContent"></div>
        </div>
    </div>

    <script>
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å JavaScript –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        async function handleAction(action) {
            const response = await fetch(`/action/${player.player_id}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `action=${action}`
            });
            const data = await response.json();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            document.getElementById('messageBox').innerText = data.message;
            
            // –ï—Å–ª–∏ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
            if (action === 'inventory') {
                const inventoryBox = document.getElementById('inventoryBox');
                const inventoryContent = document.getElementById('inventoryContent');
                inventoryBox.style.display = 'block';
                if (data.inventory && data.inventory.length > 0) {
                    inventoryContent.innerHTML = data.inventory.map(item => `<div>üì¶ ${item}</div>`).join('');
                } else {
                    inventoryContent.innerHTML = '<div>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—É—Å—Ç</div>';
                }
            }
        }
    </script>
</body>
</html>
